2002  rails g scaffold Profile name:string
2003  rails db:migrate
2004  rails s

gem 'carrierwave'
2005  bundle install

2006  rails g migration add_picture_to_profiles picture:string
2007  rails db:migrate
2008  rails generate uploader Profile

2009  rails s
2010  rails d uploader Profile
2011  rails generate uploader Picture
2012  rails s
2013  bundle install
=============================================
link: " https://medium.com/rails-ember-beyond/ajax-file-upload-in-rails-using-dropzone-and-carrierwave-6f5436fdfdb0#:~:text=DropzoneJS%20is%20an%20open%20source,Add%20it%20to%20your%20Gemfile. "

gem 'popper_js'

gem 'jquery-rails'

gem 'bootstrap'

gem 'dropzonejs-rails'

yarn add jquery
yarn add popper.js
yarn add bootstrap
yarn add dropzone
yarn install

application.js
require("jquery")
require("bootstrap")
//= require dropzone

environment.js
const webpack = require('webpack')
environment.plugins.prepend('Provide',
  new webpack.ProvidePlugin({
    $: 'jquery/src/jquery',
    jQuery: 'jquery/src/jquery',
    Popper: ['popper.js', 'default'],
    'windows.jQuery': 'jquery'
  })
)

application.css.scss
*= require dropzone/dropzone
@import "bootstrap";

=================================================

https://cdnjs.cloudflare.com/ajax/libs/dropzone/5.7.2/min/dropzone.min.js

<%= bootstrap_form_for([project, project_rendering_image], url: project_project_rendering_images_path(project, project_rendering_image), method: 'post', html: { id: 'render-new-document', class: 'dropzone', data: { maxfilesize: CertificationPathDocument::MAXIMUM_DOCUMENT_FILE_SIZE, acceptedfiles: ImageUploader.new.extension_white_list_js } }) do |f| %>
    <div class="fallback">
      <%= f.file_field :rendering_image, hide_label: true %>
      <%= f.primary 'Upload project rendering image' %>
    </div>
    <div id="render-dropzone-top">
      <div class="dz-message">
        <%= ikoen_with_text('files-o', 'Drop files here or click to upload project rendering image.') %>
      </div>
    </div>
    <div id="render-dropzone-bottom" style="display:none;">
      <div id="render-dropzone-previews" class="table table-striped table-bordered">
        <div class="file-row header">
          <div><strong>File Name</strong></div>
          <div><strong>File Size</strong></div>
          <div><strong>Upload Progress</strong></div>
          <div><strong>Actions</strong></div>
        </div>
      </div>
      <br/>

      <div class="hr-line-dashed"></div>
      <%= btn_link_to('#', id: 'render-dropzone-upload-all', icon: 'upload', text: 'Upload project rendering image') %>
    </div>
<% end %>
<div id="render-dropzone-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="dropzone-modal-title">
  <div class="modal-dialog modal-md">
    <div class="modal-content">
      <div class="modal-header alert-danger">
        <%= btn_close_modal %>
        <h4 class="modal-title" id="render-dropzone-modal-title"></h4>
      </div>
      <div class="modal-body"></div>
    </div>
  </div>
</div>
<%= javascript_include_tag 'rendering_images_uploader' %>

<%= link_to 'Delete', profile_document_path(@profile, document, data: document.docs), method: :delete %> 

-------------------------------------------------------------

var dropzoneUploading = false;

$(function () {
    Dropzone.options.renderNewDocument = {
        autoProcessQueue: false, // Prevents Dropzone from uploading dropped files immediately
        paramName: 'image[rendering_image]',
        parallelUploads: 5,
        previewsContainer: '#render-dropzone-previews',
        clickable: '#render-dropzone-top',
        previewTemplate: '<div class="file-row"> <div><p class="name" data-dz-name></p><strong class="error text-danger" data-dz-errormessage></strong></div> <div><p class="size" data-dz-size></p></div> <div> <div class="progress progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"> <div class="progress-bar progress-bar-success" style="width:0%;" data-dz-uploadprogress></div> </div> </div> <div> <a href="#" data-dz-remove> <i title="Remove upload" data-toggle="tooltip" class="fa fa-lg fa-trash" style="padding-right: 10px;"></i></a> </div> </div>',
        maxFilesize: $('form.dropzone').data('maxfilesize'), // in MB
        acceptedFiles: $('form.dropzone').data('acceptedfiles'),
        timeout: 0,

        init: function () {
            var documentsDropzone = this;
            var dropzoneTop = $("#render-dropzone-top");
            var dropzoneBottom = $("#render-dropzone-bottom");
            var dropzoneModal = $("#render-dropzone-modal");
            var uploadButton = $("#render-dropzone-upload-all");
            var previewsContainer = $("#render-dropzone-previews");
            var uploadErrors = [];

            // Process all queued files when the upload button is clicked
            uploadButton.click(function (e) {
                if (!dropzoneUploading) {
                    // All rejected files should first be removed from the queue list
                    if (documentsDropzone.getRejectedFiles().length > 0) {
                        // Show a modal box
                        dropzoneModal.find('.modal-title').html('<i class="fa fa-exclamation-circle"></i>&nbsp;&nbsp;Validation error');
                        dropzoneModal.find('.modal-body').html('Please remove all invalid files before uploading.');
                        dropzoneModal.find('.modal-header').attr('class', 'modal-header alert-danger');
                        dropzoneModal.modal('show');
                    }
                    else {
                        dropzoneUploading = true;
                        documentsDropzone.processQueue();
                    }
                }
                e.preventDefault();
            });

            // Show the previews container and upload button when one or more files are added
            this.on("addedfile", function () {
                dropzoneBottom.slideDown();
            });
            // Hide the previews container and upload button when all files are removed
            this.on("removedfile", function () {
                if (previewsContainer.children().length == 1) {
                    dropzoneBottom.slideUp();
                }
            });
            // Once the upload button is clicked, the full queue can be processed
            this.on("processing", function () {
                this.options.autoProcessQueue = true;
                uploadButton.html('<i class="fa fa-lg fa-cog fa-spin"></i>&nbsp;&nbsp;Please wait...');
                uploadButton.prop('disabled', true);
                dropzoneTop.hide();
            });
            // Catch all server errors
            this.on("error", function (file, errorMessage, XMLHttpRequest) {
                // Errors returned by the server
                if (XMLHttpRequest !== undefined) {
                    uploadErrors.push('<strong>' + file.name + '</strong>: ' + errorMessage);
                }
                // Errors on the client side
                else {
                    // These errors are shown in the file row
                }
            });
            // Notify the user when all uploads are completed
            this.on("queuecomplete", function () {
                if (dropzoneUploading) {
                    var modalBody = '';
                    var modalHeaderClass = '';

                    // There were server errors during the upload
                    if (uploadErrors.length > 0) {
                        modalBody = '<div>Some images weren\'t successfully uploaded because of the following errors:</div>';

                        modalBody += '<ul>';
                        $.each(uploadErrors, function (index, uploadError) {
                            modalBody += '<li>' + uploadError + '</li>';
                        });
                        modalBody += '</ul>';

                        modalBody += '<div>All other project rendering images were uploaded successfully.</div>';
                        modalHeaderClass = 'alert-warning';
                    }
                    // There were no errors
                    else {
                        modalBody = 'All project rendering images were successfully uploaded.';
                        modalHeaderClass = 'alert-success';
                    }

                    // Show a modal box
                    dropzoneModal.find('.modal-title').html('<i class="fa fa-check-circle"></i>&nbsp;&nbsp;Uploading completed');
                    dropzoneModal.find('.modal-body').html(modalBody);
                    dropzoneModal.find('.modal-header').attr('class', 'modal-header ' + modalHeaderClass);
                    dropzoneModal.modal('show');
                }
            });
        }
    };

    // Handle closing of modal box
    $('#render-dropzone-modal').on('hide.bs.modal', function (e) {
        // Reload the page when the upload notification is closed by the user
        if (dropzoneUploading) {
            location.reload();
        }
    });
});